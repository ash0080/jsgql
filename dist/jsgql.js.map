{"version":3,"file":"jsgql.js","sources":["../src/jsgql.js"],"sourcesContent":["'use strict'\n\nconst gql = require('graphql-tag')\n\nfunction jsgql ({ type, name, variables, method, fields, types }) {\n  let gqlStr = `${type} ${name}`\n\n  gqlStr = `${gqlStr}${processName(variables, types)} {\n    ${method}${processMethod(variables)} {\n      ${processFields(fields)}\n    }\n  }`\n\n  return gql(gqlStr)\n}\n\nfunction typeOf (obj) {\n  let type = {}.toString.call(obj).split(' ')[1].slice(0, -1)\n\n  return type === 'Number' ? 'Int' : type\n}\n\nfunction processName (variables, types = {}) {\n  if (!variables) return ''\n  let variablesList = []\n\n  for (let name in variables) {\n    let value = variables[name]\n    let type = types[name] || typeOf(value)\n\n    if (name.includes('id') || name.includes('Id')) type = 'ID'\n\n    variablesList.push(`$${name}: ${type}!`)\n  }\n\n  return `(${variablesList.join(', ')})`\n}\n\nfunction processMethod (variables) {\n  if (!variables) return ''\n\n  let variablesList = []\n\n  for (let name in variables) {\n    variablesList.push(`${name}: $${name}`)\n  }\n\n  return `(${variablesList.join(', ')})`\n}\n\nfunction processFields (fields) {\n  if (!fields) return ''\n\n  return fields.reduce((fieldsStr, field) => {\n    if (Array.isArray(field)) {\n      let [key, subFields] = field\n\n      fieldsStr += ` ${key} {\n        ${processFields(subFields)}\n      }`\n    } else {\n      fieldsStr += `${field}\\n`\n    }\n\n    return fieldsStr\n  }, '')\n}\n\nexports = module.exports = jsgql\nexports.processName = processName\nexports.processMethod = processMethod\nexports.processFields = processFields\nexports.typeOf = typeOf\nexports.gql = gql\n"],"names":["let","gql"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,aAAY;AAIZ,SAAS,KAAK,EAAE,GAAA,EAAkD;MAAhD,IAAI,YAAE;MAAA,IAAI,YAAE;MAAA,SAAS,iBAAE;MAAA,MAAM,cAAE;MAAA,MAAM,cAAE;MAAA,KAAK;EAC5DA,IAAI,MAAM,GAAG,IAAO,MAAE,GAAE,KAAI;EAE5B,MAAM,GAAG,EAAC,GAAE,MAAM,IAAG,WAAW,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA,aAChD,GAAE,MAAM,IAAG,aAAa,CAAC,SAAS,CAAC,CAAA,eACjC,IAAE,aAAa,CAAC,MAAM,CAAC,CAAA,kBAE1B;EAED,OAAOC,UAAG,CAAC,MAAM,CAAC;CACnB;AAED,SAAS,MAAM,EAAE,GAAG,EAAE;EACpBD,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC;EAE3D,OAAO,IAAI,KAAK,QAAQ,GAAG,KAAK,GAAG,IAAI;CACxC;AAED,SAAS,WAAW,EAAE,SAAS,EAAE,KAAU,EAAE;+BAAP,GAAG,EAAE;EACzC,IAAI,CAAC,SAAS,EAAE,EAAA,OAAO,EAAE,EAAA;EACzBA,IAAI,aAAa,GAAG,GAAE;EAEtB,KAAKA,IAAI,IAAI,IAAI,SAAS,EAAE;IAC1BA,IAAI,KAAK,GAAG,SAAS,CAAC,IAAI,EAAC;IAC3BA,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,KAAK,EAAC;IAEvC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAA,IAAI,GAAG,KAAI,EAAA;IAE3D,aAAa,CAAC,IAAI,EAAC,GAAE,GAAE,IAAI,OAAG,GAAE,IAAI,MAAE,GAAE;GACzC;EAED,QAAO,GAAE,IAAE,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,MAAE,CAAC;CACvC;AAED,SAAS,aAAa,EAAE,SAAS,EAAE;EACjC,IAAI,CAAC,SAAS,EAAE,EAAA,OAAO,EAAE,EAAA;EAEzBA,IAAI,aAAa,GAAG,GAAE;EAEtB,KAAKA,IAAI,IAAI,IAAI,SAAS,EAAE;IAC1B,aAAa,CAAC,IAAI,EAAC,IAAO,QAAI,GAAE,IAAI,GAAG;GACxC;EAED,QAAO,GAAE,IAAE,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,MAAE,CAAC;CACvC;AAED,SAAS,aAAa,EAAE,MAAM,EAAE;EAC9B,IAAI,CAAC,MAAM,EAAE,EAAA,OAAO,EAAE,EAAA;EAEtB,OAAO,MAAM,CAAC,MAAM,CAAC,UAAC,SAAS,EAAE,KAAK,EAAE;IACtC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;MACxB,IAAK,GAAG;MAAE,IAAA,SAAS,YAAf;MAEJ,SAAS,IAAI,GAAE,GAAE,GAAG,iBAClB,IAAE,aAAa,CAAC,SAAS,CAAC,CAAA,eAC3B;KACF,MAAM;MACL,SAAS,IAAI,KAAQ,QAAG;KACzB;IAED,OAAO,SAAS;GACjB,EAAE,EAAE,CAAC;CACP;AAED,OAAO,GAAG,cAAc,GAAG,MAAK;AAChC,mBAAmB,GAAG,YAAW;AACjC,qBAAqB,GAAG,cAAa;AACrC,qBAAqB,GAAG,cAAa;AACrC,cAAc,GAAG,OAAM;AACvB,WAAW,GAAGC,WAAG;;;;;;;;;;;;;;;;;;;;;;;"}